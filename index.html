<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ember - AI Dating Assistant</title>
    <link rel="canonical" href="https://emberaidating.app/">
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JK6P188RT9"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        
        // Get UTM parameters from URL
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }
        
        // Capture UTM parameters and store in sessionStorage for tracking
        const utmParams = {
            source: getUrlParameter('utm_source') || 'direct',
            medium: getUrlParameter('utm_medium') || 'none',
            campaign: getUrlParameter('utm_campaign') || 'none',
            content: getUrlParameter('utm_content') || 'none',
            term: getUrlParameter('utm_term') || 'none'
        };
        
        // Store UTM parameters in sessionStorage for later use
        sessionStorage.setItem('utm_source', utmParams.source);
        sessionStorage.setItem('utm_medium', utmParams.medium);
        sessionStorage.setItem('utm_campaign', utmParams.campaign);
        sessionStorage.setItem('utm_content', utmParams.content);
        sessionStorage.setItem('utm_term', utmParams.term);
        
        // Initialize GA4 with UTM parameters
        gtag('config', 'G-JK6P188RT9', {
            'page_path': window.location.pathname + window.location.search,
            'custom_map': {
                'dimension1': 'utm_source',
                'dimension2': 'utm_medium',
                'dimension3': 'utm_campaign',
                'dimension4': 'utm_content',
                'dimension5': 'utm_term'
            },
            'utm_source': utmParams.source,
            'utm_medium': utmParams.medium,
            'utm_campaign': utmParams.campaign,
            'utm_content': utmParams.content,
            'utm_term': utmParams.term
        });
        
        // Track page view with UTM parameters
        gtag('event', 'page_view', {
            'page_title': document.title,
            'page_location': window.location.href,
            'utm_source': utmParams.source,
            'utm_medium': utmParams.medium,
            'utm_campaign': utmParams.campaign,
            'utm_content': utmParams.content,
            'utm_term': utmParams.term
        });
    </script>
    
    <script>
        // Set base path - only for GitHub Pages, not custom domain
        (function() {
            const hostname = window.location.hostname;
            // If using custom domain, don't add base tag
            if (hostname === 'emberaidating.app' || hostname.endsWith('.emberaidating.app')) {
                return; // No base tag needed for custom domain
            }
            // Only add base tag for GitHub Pages
            if (hostname.includes('github.io')) {
                const repoName = 'ember-app-landing';
                const base = document.createElement('base');
                base.href = '/' + repoName + '/';
                document.head.appendChild(base);
            }
        })();
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            background: linear-gradient(to right, #ef4444, #dc2626);
            color: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 40px 20px 60px;
            line-height: 1.6;
            opacity: 0;
            animation: fadeIn 0.8s ease-in forwards;
            overflow-x: hidden;
            position: relative;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* Allow text input to be selectable */
        input, textarea {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }
        
        /* Video Background */
        .video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            object-fit: cover;
            opacity: 0.4;
        }
        
        /* Retro/Vintage Overlay */
        .video-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background: 
                linear-gradient(180deg, rgba(239, 68, 68, 0.1) 0%, transparent 50%, rgba(220, 38, 38, 0.1) 100%),
                radial-gradient(circle at 50% 50%, transparent 0%, rgba(0, 0, 0, 0.1) 100%);
            pointer-events: none;
            mix-blend-mode: overlay;
        }
        
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        
        /* Title with Logo */
        .title-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }
        
        .logo {
            width: 64px;
            height: 64px;
            border-radius: 16px;
            object-fit: contain;
            flex-shrink: 0;
        }
        
        h1 {
            font-size: 3.5rem;
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            letter-spacing: -0.02em;
            margin: 0;
        }
        
        .subtitle {
            font-size: 1.25rem;
            margin-bottom: 24px;
            color: rgba(255, 255, 255, 0.95);
            font-weight: 400;
            font-style: italic;
        }
        
        /* Title Section Divider */
        .title-divider {
            margin: 32px auto;
            padding-top: 32px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 700px;
            width: 100%;
            position: relative;
            z-index: 1;
        }
        
        /* Content Container - Between Dividers */
        .content-between-dividers {
            position: relative;
            width: 85vw;
            max-width: 85vw;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.5);
            z-index: 0;
            padding-top: 40px;
            padding-bottom: 100px;
            border-radius: 8px;
            box-sizing: border-box;
        }
        
        /* QR Code Placeholder (Ember Banner) */
        .qr-placeholder {
            margin: 40px auto;
            width: 300px;
            height: 300px;
            max-width: 300px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s ease;
        }
        
        .qr-placeholder.hidden {
            display: none;
        }
        
        .qr-label {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            text-align: center;
        }
        
        /* Platform Toggle Switch */
        .platform-toggle {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 32px 0;
        }
        
        .toggle-switch {
            position: relative;
            width: 140px;
            height: 44px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 22px;
            cursor: pointer;
            transition: background 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.3);
            flex-shrink: 0;
        }
        
        .toggle-switch.active {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .toggle-switch:hover {
            background: rgba(255, 255, 255, 0.25);
        }
        
        .toggle-slider {
            position: absolute;
            top: 4px;
            left: 4px;
            width: 60px;
            height: 36px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 18px;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
            color: #ef4444;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .toggle-switch.active .toggle-slider {
            transform: translateX(0);
        }
        
        .toggle-switch:not(.active) .toggle-slider {
            transform: translateX(calc(140px - 60px - 8px));
        }
        
        
        /* Hide badges by default, show based on toggle */
        .app-badge {
            transition: opacity 0.3s ease;
        }
        
        .app-badge.hidden {
            display: none;
        }
        
        /* Video Background Container */
        .video-background-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        /* New iOS App Video (below embers) */
        .app-video-wrapper {
            z-index: -2;
        }
        
        /* Embers Video (on top) */
        .embers-video-wrapper {
            z-index: -1;
        }
        
        .video-background-wrapper video {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            object-fit: cover;
            -webkit-playsinline: true;
            webkit-playsinline: true;
        }
        
        /* Embers video opacity */
        .embers-video-wrapper video {
            opacity: 0.25;
        }
        
        /* New app video opacity - adjust as needed */
        .app-video-wrapper video {
            opacity: 0.6;
        }
        
        /* Retro/Vintage Overlay */
        .video-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background: 
                linear-gradient(180deg, rgba(239, 68, 68, 0.1) 0%, transparent 30%, transparent 70%, rgba(220, 38, 38, 0.1) 100%),
                radial-gradient(ellipse at center, transparent 0%, rgba(0, 0, 0, 0.15) 100%),
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 0, 0, 0.03) 2px, rgba(0, 0, 0, 0.03) 4px);
            pointer-events: none;
            mix-blend-mode: overlay;
        }
        
        /* Ensure content is above video and overlay */
        .container {
            position: relative;
            z-index: 1;
            max-width: 700px;
            width: 100%;
            text-align: center;
            padding-bottom: 20px;
        }
        
        /* Content wrapper to position overlay correctly */
        .content-wrapper {
            position: relative;
            width: 100%;
        }
        
        /* Dropdown Tabs */
        .dropdown-tabs {
            margin: 32px auto;
            width: 100%;
            max-width: 70%;
            padding: 0 20px;
            box-sizing: border-box;
        }
        
        .dropdown-tab {
            margin-bottom: 16px;
            border-radius: 16px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            width: 100%;
        }
        
        .dropdown-tab-header {
            padding: 20px 24px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.25rem;
            font-weight: 600;
            color: #ffffff;
            transition: background-color 0.2s;
        }
        
        .dropdown-tab-header:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .dropdown-tab-header::after {
            content: '‚ñº';
            font-size: 0.875rem;
            transition: transform 0.3s;
        }
        
        .dropdown-tab.active .dropdown-tab-header::after {
            transform: rotate(180deg);
        }
        
        .dropdown-tab-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
            padding: 0 24px;
        }
        
        .dropdown-tab.active .dropdown-tab-content {
            max-height: 8000px;
            padding: 0 24px 24px;
        }
        
        /* Padding above testimonials in dropdown */
        .dropdown-tab-content .testimonials {
            padding-top: 32px;
        }
        
        /* Additional padding for testimonials carousel */
        .dropdown-tab-content .testimonials-carousel {
            margin-top: 16px;
        }
        
        /* Feature Bullet Points */
        .features {
            text-align: left;
            display: inline-block;
            width: 100%;
        }
        
        .features ul {
            list-style: none;
            padding: 0;
        }
        
        .features li {
            padding: 12px 0;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.95);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .features li .emoji {
            font-size: 1.25rem;
            flex-shrink: 0;
        }
        
        /* User Count */
        .user-count {
            margin: 24px auto;
            padding: 0 20px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 1.125rem;
            color: rgba(255, 255, 255, 0.95);
            font-weight: 500;
            width: 100%;
            max-width: 70%;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 60px;
        }
        
        .user-count-inner {
            padding: 16px 24px;
            width: 100%;
            text-align: center;
        }
        
        .user-count .number {
            font-weight: 700;
            color: #ffffff;
        }
        
        /* App Store Badges */
        .app-badges {
            display: flex;
            flex-direction: column;
            gap: 16px;
            justify-content: center;
            align-items: center;
            margin: 32px 0;
        }
        
        .app-badge {
            height: 60px;
            width: auto;
            transition: transform 0.2s;
            cursor: pointer;
            opacity: 0.7;
            display: flex;
            align-items: center;
        }
        
        .app-badge:hover {
            transform: translateY(-2px);
            opacity: 1;
        }
        
        .app-badge img {
            height: 60px;
            width: auto;
            min-height: 60px;
            display: block;
            object-fit: contain;
        }
        
        /* Force both badges to exact same size */
        #androidBadge,
        #iosBadge {
            height: 60px !important;
            min-height: 60px !important;
            max-height: 60px !important;
            display: flex !important;
            align-items: center !important;
        }
        
        #androidBadge img,
        #iosBadge img {
            height: 60px !important;
            min-height: 60px !important;
            max-height: 60px !important;
            max-width: 200px !important;
            width: auto !important;
            object-fit: contain !important;
            display: block !important;
        }
        
        /* Force exact same size for both badges - use fixed dimensions */
        #androidBadge,
        #iosBadge {
            width: 200px !important;
            min-width: 200px !important;
            max-width: 200px !important;
            height: 60px !important;
            min-height: 60px !important;
            max-height: 60px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            overflow: hidden !important;
        }
        
        #androidBadge img,
        #iosBadge img {
            width: 200px !important;
            min-width: 200px !important;
            max-width: 200px !important;
            height: 60px !important;
            min-height: 60px !important;
            max-height: 60px !important;
            object-fit: contain !important;
            object-position: center !important;
        }
        
        /* Testimonials Carousel */
        .testimonials {
            margin: 40px auto 0;
            padding: 0 20px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            position: relative;
            min-height: 120px;
            width: 100%;
            max-width: 70%;
            box-sizing: border-box;
        }
        
        .testimonials-inner {
            padding: 32px 24px;
        }
        
        .testimonials-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 24px;
            color: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        .testimonials-title .star {
            font-size: 1.25rem;
        }
        
        .testimonials-carousel {
            position: relative;
            overflow: hidden;
        }
        
        .testimonials-track {
            display: flex;
            transition: transform 0.6s ease-in-out;
            will-change: transform;
        }
        
        .testimonial {
            min-width: 100%;
            padding: 0 20px;
            box-sizing: border-box;
            opacity: 0;
            animation: fadeInTestimonial 0.6s ease-in forwards;
        }
        
        @keyframes fadeInTestimonial {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        .testimonial-text {
            font-size: 1.125rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.95);
            font-style: italic;
            quotes: '"' '"' "'" "'";
            margin-bottom: 12px;
        }
        
        .testimonial-text::before {
            content: open-quote;
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.6);
            margin-right: 8px;
        }
        
        .testimonial-text::after {
            content: close-quote;
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.6);
            margin-left: 8px;
        }
        
        .testimonial-author {
            font-size: 0.9375rem;
            color: rgba(255, 255, 255, 0.8);
            font-style: normal;
            margin-top: 12px;
            text-align: right;
        }
        
        /* Email Signup Form */
        .email-signup {
            margin: 40px auto;
            padding: 32px 20px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 35%;
            box-sizing: border-box;
        }
        
        .email-signup h2 {
            margin-top: 0;
            margin-bottom: 12px;
            color: #ffffff;
            font-size: 1.75rem;
            font-weight: 600;
        }
        
        .email-signup p {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 24px;
            font-size: 1rem;
        }
        
        .email-form {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .email-input {
            flex: 1;
            min-width: 200px;
            padding: 14px 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            font-size: 16px;
            font-family: inherit;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            transition: all 0.2s;
        }
        
        .email-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.6);
            background: #ffffff;
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.2);
        }
        
        .email-input::placeholder {
            color: #999;
        }
        
        .email-submit {
            padding: 14px 28px;
            background: #ef4444;
            color: #ffffff;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            white-space: nowrap;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .email-submit:hover {
            background: #dc2626;
            transform: translateY(-1px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }
        
        .email-submit:active {
            transform: translateY(0);
        }
        
        .email-submit:disabled {
            background: rgba(239, 68, 68, 0.6);
            cursor: not-allowed;
            transform: none;
        }
        
        .email-message {
            margin-top: 16px;
            padding: 14px;
            border-radius: 12px;
            display: none;
            font-size: 0.9375rem;
        }
        
        .email-message.success {
            background: rgba(16, 185, 129, 0.2);
            color: #ffffff;
            border: 1px solid rgba(16, 185, 129, 0.4);
            display: block;
        }
        
        .email-message.error {
            background: rgba(239, 68, 68, 0.3);
            color: #ffffff;
            border: 1px solid rgba(239, 68, 68, 0.5);
            display: block;
        }
        
        /* Social Media Links */
        .social-links {
            margin: 40px 0;
            display: flex;
            gap: 16px;
            justify-content: center;
            align-items: center;
        }
        
        .social-link {
            padding: 12px;
            border-radius: 12px;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .social-link:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }
        
        .social-link svg {
            color: #ffffff;
            width: 22px;
            height: 22px;
        }
        
        /* Navigation */
        nav {
            margin-top: 50px;
            padding-top: 30px;
            padding-bottom: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
        }
        
        nav a {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-size: 0.9375rem;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.2s;
        }
        
        nav a:hover {
            background: rgba(255, 255, 255, 0.15);
            color: #ffffff;
        }
        
        nav a:not(:last-child)::after {
            content: '‚Ä¢';
            margin-left: 12px;
        }
        
        /* Copyright Footer */
        .copyright-footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.875rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        
        /* Responsive */
        @media (max-width: 640px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .title-section {
                flex-direction: column;
                gap: 12px;
            }
            
            .logo {
                width: 56px;
                height: 56px;
            }
            
            .subtitle {
                font-size: 1.125rem;
            }
            
            .content-between-dividers {
                max-width: 99%;
                width: 99%;
            }
            
            .dropdown-tabs {
                padding: 0 10px;
                max-width: 100%;
            }
            
            /* Mobile dropdown content - more space and padding */
            .dropdown-tab-content {
                padding: 0 16px;
            }
            
            .dropdown-tab.active .dropdown-tab-content {
                max-height: 10000px;
                padding: 0 16px 32px;
            }
            
            .dropdown-tab-header {
                padding: 16px 20px;
            }
            
            /* Mobile widths relative to black container with padding (like dropdown tabs) */
            .user-count {
                padding-left: 10px;
                padding-right: 10px;
                max-width: calc(100% - 20px);
                margin-left: 10px;
                margin-right: 10px;
            }
            
            .testimonials {
                padding-top: 24px;
                padding-bottom: 24px;
                padding-left: 10px;
                padding-right: 10px;
                max-width: calc(100% - 20px);
                margin-left: 10px;
                margin-right: 10px;
            }
            
            .email-signup {
                padding-left: 10px;
                padding-right: 10px;
                max-width: calc(100% - 20px);
                margin-left: 10px;
                margin-right: 10px;
            }
            
            .email-form {
                flex-direction: column;
            }
            
            .email-submit {
                width: 100%;
            }
            
            .platform-toggle {
                margin: 24px 0;
            }
            
            .toggle-switch {
                width: 120px;
                height: 40px;
            }
            
            .toggle-slider {
                width: 52px;
                height: 32px;
                font-size: 0.75rem;
            }
            
            .toggle-switch.active .toggle-slider {
                transform: translateX(0);
            }
            
            .toggle-switch:not(.active) .toggle-slider {
                transform: translateX(calc(120px - 52px - 8px));
            }
            
            /* Mobile badge sizes - force exact match */
            #androidBadge,
            #iosBadge {
                width: 160px !important;
                min-width: 160px !important;
                max-width: 160px !important;
                height: 50px !important;
                min-height: 50px !important;
                max-height: 50px !important;
            }
            
            #androidBadge img,
            #iosBadge img {
                width: 160px !important;
                min-width: 160px !important;
                max-width: 160px !important;
                height: 50px !important;
                min-height: 50px !important;
                max-height: 50px !important;
                object-fit: contain !important;
                object-position: center !important;
            }
            
            .qr-placeholder {
                width: 250px;
                height: 250px;
                max-width: 250px;
                padding: 24px;
            }
            
            .app-badges {
                flex-direction: column;
                gap: 12px;
            }
            
            .app-badge {
                height: 50px;
                min-height: 50px;
            }
            
            .app-badge img {
                height: 50px;
                min-height: 50px;
                width: auto;
            }
            
            /* Force same dimensions for both badges on mobile */
            #androidBadge,
            #iosBadge {
                height: 50px !important;
                min-height: 50px !important;
                max-height: 50px !important;
                display: flex !important;
                align-items: center !important;
            }
            
            #androidBadge img,
            #iosBadge img {
                height: 50px !important;
                min-height: 50px !important;
                max-height: 50px !important;
                width: auto !important;
                object-fit: contain !important;
            }
            
            nav {
                flex-direction: column;
                gap: 8px;
            }
            
            nav a:not(:last-child)::after {
                display: none;
            }
            
            .testimonial-text {
                font-size: 1rem;
            }
        }
        
        /* Scroll to Top Button - Positioned at bottom right of black container */
        .scroll-to-top {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 48px;
            height: 48px;
            background: rgba(239, 68, 68, 0.9);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            margin: 0;
            padding: 0;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            z-index: 10;
        }
        
        .scroll-to-top:hover {
            background: rgba(239, 68, 68, 1);
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .scroll-to-top:active {
            transform: translateY(0) scale(1.02);
        }
        
        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }
        
        .scroll-to-top-icon {
            color: #ffffff;
            width: 24px;
            height: 24px;
            stroke-width: 2.5;
        }
        
        @media (max-width: 640px) {
            .scroll-to-top {
                width: 48px;
                height: 48px;
                bottom: 30px;
                right: 30px;
            }
            
            .scroll-to-top-icon {
                width: 22px;
                height: 22px;
            }
        }
    </style>
</head>
<body>
    <!-- New iOS App Video Background (below embers) -->
    <div class="video-background-wrapper app-video-wrapper">
        <video autoplay muted loop playsinline webkit-playsinline preload="auto">
            <source src="./Ember AI Dating Assistant (New iOS App).MP4" type="video/mp4">
            <source src="./Ember AI Dating Assistant (New iOS App).MP4" type="video/quicktime">
            Your browser does not support the video tag.
        </video>
    </div>
    
    <!-- Video Background (Embers - on top) -->
    <div class="video-background-wrapper embers-video-wrapper">
        <video autoplay muted loop playsinline webkit-playsinline preload="auto">
            <source src="./Embers vfx(1)-comp.mov" type="video/quicktime">
            <source src="./Embers vfx(1)-comp.mov" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>
    
    <!-- Retro/Vintage Overlay -->
    <div class="video-overlay"></div>
    
    <div class="container">
        <!-- Title with Logo -->
        <div class="title-section">
            <img src="./ember-logo-v20.2-512px.png" alt="Ember Logo" class="logo" 
                 onerror="this.onerror=null; this.src='ember-logo-v20.2-512px.png'; this.onerror=function(){this.style.display='none';};" />
            <h1>Ember</h1>
        </div>
        
        <p class="subtitle">AI-powered dating assistant to help you navigate conversations and plan dates.</p>
        
        <!-- Title Divider -->
        <div class="title-divider"></div>
        
        <!-- Content Container Between Dividers -->
        <div class="content-between-dividers">
            <!-- QR Code Placeholders (iOS and Android) -->
            <div class="qr-placeholder" id="iosQR">
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=240x240&data=https://apps.apple.com/us/app/ember-ai-dating-assistant/id6755344703" alt="iOS App Store QR Code" style="width: 100%; height: 100%; object-fit: contain; border-radius: 12px;" />
            </div>
            
            <div class="qr-placeholder hidden" id="androidQR">
                <div class="qr-label">Android QR Code<br/><small>Coming Soon</small></div>
            </div>
            
            <!-- Platform Toggle Switch -->
            <div class="platform-toggle">
                <div class="toggle-switch active" id="platformToggle">
                    <div class="toggle-slider">iOS</div>
                </div>
            </div>
            
            <!-- App Store Badges -->
            <div class="app-badges">
                <a href="https://apps.apple.com/us/app/ember-ai-dating-assistant/id6755344703" target="_blank" rel="noopener noreferrer" class="app-badge" id="iosBadge" title="Download on the App Store" style="height: 60px; min-height: 60px;">
                    <img src="https://tools.applemediaservices.com/api/badges/download-on-the-app-store/black/en-us?size=250x83&releaseDate=1609459200" alt="Download on the App Store" style="height: 60px !important; min-height: 60px !important; width: auto !important; display: block;" onerror="this.parentElement.style.display='none';" />
                </a>
                <a href="#" class="app-badge hidden" id="androidBadge" title="Coming soon to Google Play" style="height: 60px; min-height: 60px;">
                    <img src="https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png" alt="Get it on Google Play" style="height: 60px !important; min-height: 60px !important; width: auto !important; display: block;" onerror="this.parentElement.style.display='none';" />
                </a>
            </div>
            
            <!-- Testimonials Carousel (Standalone) -->
            <div class="testimonials">
                <div class="testimonials-inner">
                    <div class="testimonials-title">
                        <span class="star">‚≠ê</span>
                        What Users Are Saying
                        <span class="star">‚≠ê</span>
                    </div>
                    <div class="testimonials-carousel">
                        <div class="testimonials-track" id="testimonialsTrack">
                            <!-- Testimonials will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Dropdown Tabs Section -->
            <div class="dropdown-tabs">
                <!-- Features Tab -->
                <div class="dropdown-tab" id="featuresTab2">
                    <div class="dropdown-tab-header">
                        Features
                    </div>
                    <div class="dropdown-tab-content">
                        <div class="features">
                            <ul>
                                <li><span class="emoji">‚ú®</span> <span>AI-powered response generation</span></li>
                                <li><span class="emoji">üé®</span> <span>9 unique reply styles to match your personality</span></li>
                                <li><span class="emoji">üìÖ</span> <span>Smart date scheduler and table reservation booking</span></li>
                                <li><span class="emoji">üö´</span> <span>Ad-free premium experience</span></li>
                                <li><span class="emoji">‚ö°</span> <span>Near-Unlimited daily usage with premium tiers</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- FAQ Tab -->
                <div class="dropdown-tab" id="faqTab">
                    <div class="dropdown-tab-header">
                        FAQ
                    </div>
                    <div class="dropdown-tab-content">
                        <div class="faq-content">
                            <div class="faq-item" style="margin-top: 24px;">
                                <h3 style="color: #ffffff; margin-bottom: 8px; font-size: 1.1rem;">What makes Ember different from other apps?</h3>
                                <p style="color: rgba(255, 255, 255, 0.85); margin-bottom: 20px; line-height: 1.6;">Ember uses AI to help you craft personalized responses that match your unique personality. With 9 different reply styles, smart date scheduling, third-party table reservation booking, and an ad-free experience, we make dating conversations effortless and authentic.</p>
                            </div>
                            <div class="faq-item">
                                <h3 style="color: #ffffff; margin-bottom: 8px; font-size: 1.1rem;">Is Ember free to use?</h3>
                                <p style="color: rgba(255, 255, 255, 0.85); margin-bottom: 20px; line-height: 1.6;">Ember offers a free tier with basic features, plus premium subscription tiers for near-unlimited daily usage and access to all reply styles and advanced features.</p>
                            </div>
                            <div class="faq-item">
                                <h3 style="color: #ffffff; margin-bottom: 8px; font-size: 1.1rem;">Will my data be secure?</h3>
                                <p style="color: rgba(255, 255, 255, 0.85); margin-bottom: 20px; line-height: 1.6;">Yes! We take your privacy seriously. All data is encrypted and securely stored. We share data only with trusted service providers necessary for app functionality: OpenAI for AI-powered response generation, and Supabase for secure backend services and data storage. We do not sell your personal information to third parties.</p>
                            </div>
                            <div class="faq-item">
                                <h3 style="color: #ffffff; margin-bottom: 8px; font-size: 1.1rem;">How can I remove my data?</h3>
                                <p style="color: rgba(255, 255, 255, 0.85); margin-bottom: 20px; line-height: 1.6;">You can delete individual chats and data directly in the app. Chats are automatically deleted after the 15th item in the grid list, and you can also delete them manually at any time. Scheduled calendar dates are automatically deleted 1 day after the current date (meaning after the date has passed), and you can also delete them manually at any time. To delete all your data at once, you can request account deletion by visiting our <a href="https://emberaidating.app/account-settings.html" style="color: #ffffff; text-decoration: underline;">Account Settings</a> page.</p>
                            </div>
                            <div class="faq-item">
                                <h3 style="color: #ffffff; margin-bottom: 8px; font-size: 1.1rem;">How can I delete my account?</h3>
                                <p style="color: rgba(255, 255, 255, 0.85); margin-bottom: 20px; line-height: 1.6;">You can request account deletion by visiting our <a href="https://emberaidating.app/account-settings.html" style="color: #ffffff; text-decoration: underline;">Account Settings</a> page. We will permanently delete your account and all associated data from our systems within 30 days of your request. Please note that some data may still be stored by third-party service providers (such as OpenAI) according to their own data retention policies. Inactive accounts are automatically deleted after one year.</p>
                            </div>
                            <div class="faq-item">
                                <h3 style="color: #ffffff; margin-bottom: 8px; font-size: 1.1rem;">Can I use Ember on both iOS and Android?</h3>
                                <p style="color: rgba(255, 255, 255, 0.85); margin-bottom: 20px; line-height: 1.6;">Yes! Ember is available on both iOS and Android devices.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Email Signup Form -->
            <div class="email-signup">
                <h2>Subscribe To Our Email List</h2>
                <p>Stay updated with the latest news, features, and updates from Ember.</p>
                
                <form id="emailSignupForm" class="email-form">
                    <input 
                        type="email" 
                        id="emailInput" 
                        class="email-input"
                        placeholder="Enter your email" 
                        required
                    >
                    <button 
                        type="submit"
                        id="emailSubmit"
                        class="email-submit"
                    >
                        Notify Me
                    </button>
                </form>
                
                <div id="signupMessage" class="email-message"></div>
            </div>
            
            <!-- User Count -->
            <div class="user-count">
                <div class="user-count-inner">
                    Join thousands of users and download Ember today!
                </div>
            </div>
            
            <!-- Scroll to Top Button (bottom right of black container) -->
            <button class="scroll-to-top" id="scrollToTop" aria-label="Scroll to top">
                <svg class="scroll-to-top-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m17 11-5-5-5 5"/>
                    <path d="m17 18-5-5-5 5"/>
                </svg>
            </button>
        </div>
        
        <!-- Social Media Links -->
        <div class="social-links">
            <a
                href="https://www.instagram.com/emberai.app"
                target="_blank"
                rel="noopener noreferrer"
                class="social-link"
                aria-label="Follow us on Instagram"
            >
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                    <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                </svg>
            </a>
            
            <a
                href="https://www.tiktok.com/@emberai.app"
                target="_blank"
                rel="noopener noreferrer"
                class="social-link"
                aria-label="Follow us on TikTok"
            >
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="8" cy="18" r="4"></circle>
                    <path d="M12 18V2l7 4"></path>
                </svg>
            </a>
            
            <a
                href="https://www.snapchat.com/add/emberai.app"
                target="_blank"
                rel="noopener noreferrer"
                class="social-link"
                aria-label="Add us on Snapchat"
            >
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 10h.01"></path>
                    <path d="M15 10h.01"></path>
                    <path d="M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"></path>
                </svg>
            </a>
        </div>
        
        <!-- Copyright Footer -->
        <div class="copyright-footer">
            ¬© 2025 EMBER VISION VENTURES‚Ñ¢
        </div>
        
        <!-- Navigation -->
        <nav>
            <a href="https://emberaidating.app/account-settings.html">Account Settings</a>
            <a href="./support.html">Support</a>
            <a href="./privacy.html">Privacy Policy</a>
            <a href="./terms.html">Terms of Service</a>
        </nav>
        </div>
    </div>

    <script>
        // Supabase configuration
        const SUPABASE_URL = 'https://prpdswqojiyzobqbtpgr.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBycGRzd3Fvaml5em9icWJ0cGdyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NDAwOTcsImV4cCI6MjA3NzUxNjA5N30.9BUmDHGsBVoOvjsyiefLEZGo1XCTQMJ-UEvQcRsEEjg';

        // Testimonials data with names
        const testimonials = [
            { text: "This app really helps me balance my busy work/life schedule.", author: "Sarah" },
            { text: "The stylized filters especially the creative, genuine responses really help me break the ice!", author: "M. Johnson" },
            { text: "Choosing from different styles is a nice way to tailor your responses to your liking", author: "Alex" },
            { text: "Never Miss a date again.", author: "J. R." },
            { text: "I feel like this app is really needed in todays dating landscape where everyone is now meeting through dating apps", author: "Ava" },
            { text: "Life saver when I draw a blank, insightfully learning from the AI has improved my flirting skills in a creative way.", author: "Chris" },
            { text: "This is definitely making my dating life more efficient, hopefully it wont be a crutch, haha.", author: "T. Reyes" },
            { text: "This app originally helped me meet the absolute love of my life and current spouse Tyler! Who knew AI would be this useful?!", author: "Nina" },
            { text: "Great app! Helps me craft better messages.", author: "Rohan" }
        ];

        // Initialize dropdown tabs
        function initDropdownTabs() {
            const tabs = document.querySelectorAll('.dropdown-tab');
            tabs.forEach(tab => {
                const header = tab.querySelector('.dropdown-tab-header');
                header.addEventListener('click', () => {
                    const isActive = tab.classList.contains('active');
                    // Close all tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    // Open clicked tab if it wasn't active
                    if (!isActive) {
                        tab.classList.add('active');
                    }
                });
            });
        }

        // Initialize testimonials carousel with infinite loop
        function initTestimonials() {
            const track = document.getElementById('testimonialsTrack');
            
            // Create testimonials (original set)
            testimonials.forEach((testimonial, index) => {
                const div = document.createElement('div');
                div.className = 'testimonial';
                div.innerHTML = `
                    <p class="testimonial-text">${testimonial.text}</p>
                    <div class="testimonial-author">‚Äî ${testimonial.author}</div>
                `;
                track.appendChild(div);
            });
            
            // Clone first testimonial at the end for seamless looping
            const firstTestimonial = testimonials[0];
            const cloneDiv = document.createElement('div');
            cloneDiv.className = 'testimonial';
            cloneDiv.innerHTML = `
                <p class="testimonial-text">${firstTestimonial.text}</p>
                <div class="testimonial-author">‚Äî ${firstTestimonial.author}</div>
            `;
            track.appendChild(cloneDiv);
            
            let currentIndex = 0;
            const totalTestimonials = testimonials.length;
            let isTransitioning = false;
            
            function showNext() {
                if (isTransitioning) return;
                isTransitioning = true;
                
                currentIndex++;
                
                // Smoothly transition to the cloned first item (which appears after all originals)
                track.style.transition = 'transform 0.6s ease-in-out';
                track.style.transform = `translateX(-${currentIndex * 100}%)`;
                
                // After transition completes, instantly reset to the real first item
                setTimeout(() => {
                    if (currentIndex >= totalTestimonials) {
                        // Disable transition for instant reset
                        track.style.transition = 'none';
                        currentIndex = 0;
                        track.style.transform = `translateX(-${currentIndex * 100}%)`;
                        
                        // Force reflow
                        void track.offsetHeight;
                        
                        // Re-enable transition for next iteration
                        setTimeout(() => {
                            isTransitioning = false;
                            track.style.transition = 'transform 0.6s ease-in-out';
                        }, 50);
                    } else {
                        isTransitioning = false;
                    }
                }, 600); // Wait for transition to complete (600ms)
            }
            
            // Auto-scroll every 5 seconds
            setInterval(showNext, 5000);
        }

        // Helper function to get UTM parameters from sessionStorage or URL
        function getUtmParams() {
            return {
                source: sessionStorage.getItem('utm_source') || getUrlParameter('utm_source') || 'direct',
                medium: sessionStorage.getItem('utm_medium') || getUrlParameter('utm_medium') || 'none',
                campaign: sessionStorage.getItem('utm_campaign') || getUrlParameter('utm_campaign') || 'none',
                content: sessionStorage.getItem('utm_content') || getUrlParameter('utm_content') || 'none',
                term: sessionStorage.getItem('utm_term') || getUrlParameter('utm_term') || 'none'
            };
        }
        
        // Helper function to get URL parameter
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Email signup form handler
        document.getElementById('emailSignupForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const emailInput = document.getElementById('emailInput');
            const messageDiv = document.getElementById('signupMessage');
            const submitButton = document.getElementById('emailSubmit');
            const email = emailInput.value.trim();
            
            if (!email || !email.includes('@')) {
                messageDiv.textContent = 'Please enter a valid email address.';
                messageDiv.className = 'email-message error';
                
                // Track validation error
                if (typeof window.gtag === 'function') {
                    window.gtag('event', 'email_signup_error', {
                        'event_category': 'form',
                        'event_label': 'validation_error',
                        'value': 0
                    });
                }
                return;
            }
            
            submitButton.disabled = true;
            submitButton.textContent = 'Subscribing...';
            
            // Get UTM parameters for tracking
            const utmParams = getUtmParams();
            
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/rpc/subscribe_to_email_list`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'apikey': SUPABASE_ANON_KEY,
                        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
                    },
                    body: JSON.stringify({
                        p_email: email,
                        p_source: 'landing_page'
                    })
                });
                
                const result = await response.json();
                
                if (response.ok && result.success) {
                    messageDiv.textContent = '‚úÖ Thanks! We\'ll notify you when we launch.';
                    messageDiv.className = 'email-message success';
                    emailInput.value = '';
                    
                    // Track successful email signup conversion
                    // Use window.gtag to ensure it's available
                    if (typeof window.gtag === 'function') {
                        window.gtag('event', 'email_signup', {
                            'event_category': 'conversion',
                            'event_label': 'landing_page',
                            'value': 1,
                            'currency': 'USD',
                            // Include UTM parameters for attribution
                            'utm_source': utmParams.source,
                            'utm_medium': utmParams.medium,
                            'utm_campaign': utmParams.campaign,
                            'utm_content': utmParams.content,
                            'utm_term': utmParams.term
                        });
                        
                        console.log('‚úÖ Email signup event tracked:', {
                            event: 'email_signup',
                            utm_source: utmParams.source,
                            utm_medium: utmParams.medium,
                            utm_campaign: utmParams.campaign
                        });
                    } else {
                        console.warn('‚ö†Ô∏è gtag not available, event not tracked');
                    }
                } else {
                    throw new Error(result.message || 'Something went wrong');
                }
            } catch (error) {
                console.error('Signup error:', error);
                messageDiv.textContent = '‚ùå Something went wrong. Please try again.';
                messageDiv.className = 'email-message error';
                
                // Track signup error
                if (typeof window.gtag === 'function') {
                    window.gtag('event', 'email_signup_error', {
                        'event_category': 'form',
                        'event_label': 'api_error',
                        'value': 0,
                        'error_message': error.message || 'unknown_error'
                    });
                }
            } finally {
                submitButton.disabled = false;
                submitButton.textContent = 'Notify Me';
            }
        });

        // Fix image paths - try multiple locations (for GitHub Pages)
        function fixImagePaths() {
            const logo = document.querySelector('.logo');
            
            if (logo) {
                const logoPaths = [
                    './ember-logo-v20.2-512px.png',
                    'ember-logo-v20.2-512px.png',
                    '/ember-logo-v20.2-512px.png'
                ];
                let logoIndex = 0;
                const originalOnError = logo.onerror;
                logo.onerror = function() {
                    if (logoIndex < logoPaths.length - 1) {
                        logoIndex++;
                        this.src = logoPaths[logoIndex];
                    } else if (originalOnError) {
                        originalOnError.call(this);
                    } else {
                        this.style.display = 'none';
                    }
                };
            }
        }


        // Initialize on page load
        // Initialize platform toggle switch
        function initPlatformToggle() {
            const toggle = document.getElementById('platformToggle');
            const iosBadge = document.getElementById('iosBadge');
            const androidBadge = document.getElementById('androidBadge');
            const iosQR = document.getElementById('iosQR');
            const androidQR = document.getElementById('androidQR');
            
            let isIOS = true; // Default to iOS (left side)
            
            function switchPlatform() {
                isIOS = !isIOS;
                
                if (isIOS) {
                    // Show iOS (left side)
                    toggle.classList.add('active');
                    toggle.querySelector('.toggle-slider').textContent = 'iOS';
                    iosBadge.classList.remove('hidden');
                    androidBadge.classList.add('hidden');
                    iosQR.classList.remove('hidden');
                    androidQR.classList.add('hidden');
                } else {
                    // Show Android (right side)
                    toggle.classList.remove('active');
                    toggle.querySelector('.toggle-slider').textContent = 'Android';
                    iosBadge.classList.add('hidden');
                    androidBadge.classList.remove('hidden');
                    iosQR.classList.add('hidden');
                    androidQR.classList.remove('hidden');
                }
            }
            
            toggle.addEventListener('click', switchPlatform);
        }

        // Scroll to Top Button
        function initScrollToTop() {
            const scrollButton = document.getElementById('scrollToTop');
            
            if (!scrollButton) {
                console.error('Scroll to top button not found!');
                return;
            }
            
            // Show/hide button based on scroll position
            function toggleScrollButton() {
                const scrollY = window.scrollY || window.pageYOffset || document.documentElement.scrollTop || 0;
                
                if (scrollY > 200) {
                    scrollButton.classList.add('visible');
                    scrollButton.style.opacity = '1';
                    scrollButton.style.visibility = 'visible';
                    scrollButton.style.pointerEvents = 'auto';
                } else {
                    scrollButton.classList.remove('visible');
                    scrollButton.style.opacity = '0';
                    scrollButton.style.visibility = 'hidden';
                    scrollButton.style.pointerEvents = 'none';
                }
            }
            
            // Scroll to top function
            function scrollToTop(e) {
                if (e) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }
            
            // Add event listeners
            window.addEventListener('scroll', toggleScrollButton, { passive: true });
            window.addEventListener('resize', toggleScrollButton);
            scrollButton.addEventListener('click', scrollToTop);
            
            // Check initial scroll position
            toggleScrollButton();
        }

        // Track App Store badge clicks
        function initAppStoreTracking() {
            const iosBadge = document.getElementById('iosBadge');
            const androidBadge = document.getElementById('androidBadge');
            const utmParams = getUtmParams();
            
            if (iosBadge) {
                iosBadge.addEventListener('click', function() {
                    if (typeof window.gtag === 'function') {
                        window.gtag('event', 'app_store_click', {
                            'event_category': 'download',
                            'event_label': 'ios',
                            'value': 1,
                            'utm_source': utmParams.source,
                            'utm_medium': utmParams.medium,
                            'utm_campaign': utmParams.campaign,
                            'utm_content': utmParams.content,
                            'utm_term': utmParams.term
                        });
                    }
                });
            }
            
            if (androidBadge) {
                androidBadge.addEventListener('click', function() {
                    if (typeof window.gtag === 'function') {
                        window.gtag('event', 'app_store_click', {
                            'event_category': 'download',
                            'event_label': 'android',
                            'value': 1,
                            'utm_source': utmParams.source,
                            'utm_medium': utmParams.medium,
                            'utm_campaign': utmParams.campaign,
                            'utm_content': utmParams.content,
                            'utm_term': utmParams.term
                        });
                    }
                });
            }
        }
        
        // Track social media link clicks
        function initSocialMediaTracking() {
            const socialLinks = document.querySelectorAll('.social-link');
            const utmParams = getUtmParams();
            
            socialLinks.forEach(link => {
                link.addEventListener('click', function() {
                    const platform = this.getAttribute('aria-label') || 'unknown';
                    if (typeof window.gtag === 'function') {
                        window.gtag('event', 'social_click', {
                            'event_category': 'social',
                            'event_label': platform,
                            'value': 1,
                            'utm_source': utmParams.source,
                            'utm_medium': utmParams.medium,
                            'utm_campaign': utmParams.campaign
                        });
                    }
                });
            });
        }
        
        // Track scroll depth (engagement metric)
        function initScrollTracking() {
            let maxScroll = 0;
            const scrollThresholds = [25, 50, 75, 90];
            const trackedThresholds = new Set();
            
            window.addEventListener('scroll', function() {
                const scrollPercent = Math.round(
                    (window.scrollY + window.innerHeight) / document.documentElement.scrollHeight * 100
                );
                
                if (scrollPercent > maxScroll) {
                    maxScroll = scrollPercent;
                    
                    scrollThresholds.forEach(threshold => {
                        if (scrollPercent >= threshold && !trackedThresholds.has(threshold)) {
                            trackedThresholds.add(threshold);
                            
                            if (typeof window.gtag === 'function') {
                                window.gtag('event', 'scroll', {
                                    'event_category': 'engagement',
                                    'event_label': threshold + '%',
                                    'value': threshold
                                });
                            }
                        }
                    });
                }
            }, { passive: true });
        }
        
        // Track time on page (engagement metric)
        function initTimeOnPageTracking() {
            const startTime = Date.now();
            
            // Track time on page when user leaves
            window.addEventListener('beforeunload', function() {
                const timeOnPage = Math.round((Date.now() - startTime) / 1000); // seconds
                
                if (typeof window.gtag === 'function' && timeOnPage > 0) {
                    window.gtag('event', 'time_on_page', {
                        'event_category': 'engagement',
                        'value': timeOnPage,
                        'non_interaction': true
                    });
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            console.log('üîµ DOMContentLoaded fired');
            fixImagePaths();
            initDropdownTabs();
            initTestimonials();
            initPlatformToggle();
            initScrollToTop();
            initAppStoreTracking();
            initSocialMediaTracking();
            initScrollTracking();
            initTimeOnPageTracking();
            console.log('‚úÖ All initialization complete');
        });
        
        // Also try immediate execution in case DOMContentLoaded already fired
        if (document.readyState === 'loading') {
            console.log('üîµ Document still loading, waiting for DOMContentLoaded');
        } else {
            console.log('üîµ Document already loaded, running initScrollToTop immediately');
            setTimeout(() => {
                initScrollToTop();
            }, 100);
        }
    </script>
</body>
</html>
